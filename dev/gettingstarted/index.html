<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting started · Skylight</title><meta name="title" content="Getting started · Skylight"/><meta property="og:title" content="Getting started · Skylight"/><meta property="twitter:title" content="Getting started · Skylight"/><meta name="description" content="Documentation for Skylight."/><meta property="og:description" content="Documentation for Skylight."/><meta property="twitter:description" content="Documentation for Skylight."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Skylight logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Skylight</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Getting started</a></li><li><span class="tocitem">Spacetimes</span><ul><li><a class="tocitem" href="../spacetimes/catalogue/">Catalogue</a></li><li><a class="tocitem" href="../spacetimes/functions/">Geometric functions</a></li></ul></li><li><span class="tocitem">Radiative models</span><ul><li><a class="tocitem" href="../radiativemodels/catalogue/">Catalogue</a></li><li><a class="tocitem" href="../radiativemodels/radiativeprocesses/">Radiative processes</a></li><li><a class="tocitem" href="../radiativemodels/functions/">Functions</a></li></ul></li><li><a class="tocitem" href="../configurations/configurations/">Configurations</a></li><li><span class="tocitem">Initial data</span><ul><li><a class="tocitem" href="../initialization/pinholecamera/">Pinhole camera</a></li><li><a class="tocitem" href="../initialization/initialization/">Initialization</a></li></ul></li><li><a class="tocitem" href="../radiativetransfer/radiativetransfer/">Radiative transfer</a></li><li><span class="tocitem">Postprocess</span><ul><li><a class="tocitem" href="../postprocess/images/">Images</a></li><li><a class="tocitem" href="../postprocess/spectra/">Spectra</a></li><li><a class="tocitem" href="../postprocess/lineemission/">Line emission</a></li><li><a class="tocitem" href="../postprocess/lightcurves/">Light curves</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/disk_kerr/">Thin disk around a Kerr black hole</a></li><li><a class="tocitem" href="../examples/corona_kerr/">Lamppost corona above a Kerr black hole</a></li><li><a class="tocitem" href="../examples/torus_kerr/">Ion torus around a Kerr black hole</a></li><li><a class="tocitem" href="../examples/frkerr/">f(R)-Kerr black hole</a></li><li><a class="tocitem" href="../examples/johannsen/">Johannsen black hole</a></li><li><a class="tocitem" href="../examples/bosonstar/">Boson star</a></li><li><a class="tocitem" href="../examples/chargedwormhole/">Star across charged wormhole</a></li><li><a class="tocitem" href="../examples/rar/">RAR galactic core</a></li><li><a class="tocitem" href="../examples/skylightlogo/">Skylight logo</a></li></ul></li><li><span class="tocitem">Utils</span><ul><li><a class="tocitem" href="../utils/geometry/">Geometry and linear algebra</a></li><li><a class="tocitem" href="../utils/vectorfields/">Vector fields</a></li><li><a class="tocitem" href="../utils/constants/">Constants</a></li><li><a class="tocitem" href="../utils/units/">Units and dimensions</a></li></ul></li><li><span class="tocitem">Developers</span><ul><li><a class="tocitem" href="../developers/spacetimes/">Adding a spacetime</a></li><li><a class="tocitem" href="../developers/radiativemodels/">Adding a radiative model</a></li></ul></li><li><a class="tocitem" href="../api/">API</a></li><li><a class="tocitem" href="../publications/">Publications</a></li><li><a class="tocitem" href="../citing/">Citing</a></li><li><a class="tocitem" href="../contributing/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Getting started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting started</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/joaquinpelle/Skylight.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/joaquinpelle/Skylight.jl/blob/main/docs/src/gettingstarted.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Getting-started"><a class="docs-heading-anchor" href="#Getting-started">Getting started</a><a id="Getting-started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-started" title="Permalink"></a></h1><h3 id="1.-Set-up-your-environment"><a class="docs-heading-anchor" href="#1.-Set-up-your-environment">1. Set up your environment</a><a id="1.-Set-up-your-environment-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Set-up-your-environment" title="Permalink"></a></h3><p>After you have installed the package following the instructions in the homepage, start a Julia REPL with multithreading optionally enabled as </p><pre><code class="language-bash hljs">julia -t NT</code></pre><p>where <code>NT</code> is the number of threads you want to use. Then, load the package as</p><pre><code class="language-julia hljs">using Skylight</code></pre><h3 id="2.-Create-a-spacetime"><a class="docs-heading-anchor" href="#2.-Create-a-spacetime">2. Create a spacetime</a><a id="2.-Create-a-spacetime-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Create-a-spacetime" title="Permalink"></a></h3><p>Here, we create a Kerr spacetime in Boyer-Lindquist coordinates: </p><pre><code class="language-julia hljs">spacetime = KerrSpacetimeBoyerLindquistCoordinates(M=1.0,a=0.5)</code></pre><p>Find other available spacetimes at <a href="../spacetimes/catalogue/#Catalogue-of-spacetimes">Catalogue of spacetimes</a>. </p><h3 id="3.-Create-a-radiative-model"><a class="docs-heading-anchor" href="#3.-Create-a-radiative-model">3. Create a radiative model</a><a id="3.-Create-a-radiative-model-1"></a><a class="docs-heading-anchor-permalink" href="#3.-Create-a-radiative-model" title="Permalink"></a></h3><p>Here we create a Novikov-Thorne disk in prograde rotation around the black hole, specifying the inner and outer radii of the disk. The inner radius is set to the innermost stable circular orbit (ISCO) of the black hole, which depends on the spacetime parameters and rotation direction.</p><pre><code class="language-julia hljs">disk = NovikovThorneDisk(inner_radius=isco_radius(spacetime, ProgradeRotation()), outer_radius = 15.0)</code></pre><p>Other available radiative models can be found at <a href="../radiativemodels/catalogue/#Catalogue-of-radiative-models">Catalogue of radiative models</a>. </p><h3 id="4.-Set-up-a-camera"><a class="docs-heading-anchor" href="#4.-Set-up-a-camera">4. Set up a camera</a><a id="4.-Set-up-a-camera-1"></a><a class="docs-heading-anchor-permalink" href="#4.-Set-up-a-camera" title="Permalink"></a></h3><p>Then, we create a pinhole camera, where the position is given by the spacetime coordinates of the observation point, the aperture is determined by the horizontal and vertical aperture in degrees, and the number of pixels in each direction are given. Here the apertures are set to capture a wide view of the accretion disk. For more details on the camera setup, see <a href="../initialization/pinholecamera/#Pinhole-camera">Pinhole camera</a>. </p><pre><code class="language-julia hljs">camera = PinholeCamera(position = [0.0, 500, π/2-π/20, 0.0],
                        horizontal_aperture_in_degrees = rad2deg(80/500),
                        vertical_aperture_in_degrees = rad2deg(80/500),
                        horizontal_number_of_pixels = 600,
                        vertical_number_of_pixels = 600)</code></pre><h3 id="5.-Set-up-the-configurations-object"><a class="docs-heading-anchor" href="#5.-Set-up-the-configurations-object">5. Set up the configurations object</a><a id="5.-Set-up-the-configurations-object-1"></a><a class="docs-heading-anchor-permalink" href="#5.-Set-up-the-configurations-object" title="Permalink"></a></h3><p>We gather the spacetime, radiative model, and camera into a configurations object. This setup is for a vacuum transport problem (in the observer-to-emitter scheme).</p><pre><code class="language-julia hljs">configurations = VacuumOTEConfigurations(spacetime=spacetime,
                                        radiative_model=disk,
                                        camera = camera,
                                        unit_mass_in_solar_masses = 1e7)</code></pre><p>where <code>unit_mass_in_solar_masses</code> is the unit mass in solar masses which, together with <span>$c=G=1$</span>, fully determines your units system. This latter choice will affect the interpretation of the varius quantities set before as, e.g. the mass of the Kerr spacetime, which now is understood to correspond to <span>$10^7$</span> solar masses.</p><p>For more general non-vacuum transfer problems, use </p><pre><code class="language-julia hljs">configurations = NonVacuumOTEConfigurations(spacetime = spacetime,
    camera = camera,
    radiative_model = model,
    unit_mass_in_solar_masses = 1e7,
    observation_energies = exp10.(range(-10, stop = -5.5, length = 20)))</code></pre><p>where <code>observation_energies</code> is a vector of the observation energies in CGS units. </p><h3 id="6.-Generate-the-initial-data"><a class="docs-heading-anchor" href="#6.-Generate-the-initial-data">6. Generate the initial data</a><a id="6.-Generate-the-initial-data-1"></a><a class="docs-heading-anchor-permalink" href="#6.-Generate-the-initial-data" title="Permalink"></a></h3><p>Create the initial data for the transport problem with</p><pre><code class="language-julia hljs">initial_data = initialize(configurations)</code></pre><p>The initial data will be a matrix having the initial conditions for each observation direction as columns, with the first four components being the spacetime coordinates (the same as the camera position), and the last four components are the components of the initial momentum in the corresponding coordinate frame. </p><h3 id="7.-Define-callbacks"><a class="docs-heading-anchor" href="#7.-Define-callbacks">7. Define callbacks</a><a id="7.-Define-callbacks-1"></a><a class="docs-heading-anchor-permalink" href="#7.-Define-callbacks" title="Permalink"></a></h3><p>We define a callback to be called at each step of the equations integration. This is generally used to stop the integration under certain conditions as getting far away from the source, or intersecting the emitting surface. The default callbacks can be set up with</p><pre><code class="language-julia hljs">cb, cbp = callback_setup(configurations; rhorizon_bound=0.1)</code></pre><p>where <code>cb</code> is the Callback object, and <code>cbp</code> contains the callback parameters. In this particular setup, an extra parameter has to be passed as an argument (<code>rhorizon_bound</code>), which determines the minimum radial distance to which rays can approximate the event horizon before terminating the integration (this is because no future-directed rays can exit the event horizon, so, conversely, no past-directed rays can enter it). </p><p>Additionally, custom callbacks can be defined. For more details, see <a href="../radiativetransfer/callbacks/#Callbacks">Callbacks</a> and <a href="https://docs.sciml.ai/DiffEqDocs/stable/features/callback_functions/">Event Handling</a>. </p><h3 id="8.-Integrate-the-equations"><a class="docs-heading-anchor" href="#8.-Integrate-the-equations">8. Integrate the equations</a><a id="8.-Integrate-the-equations-1"></a><a class="docs-heading-anchor-permalink" href="#8.-Integrate-the-equations" title="Permalink"></a></h3><p>Then, we integrate the radiative transfer and geodesic equations, choosing a solver method and setting the relative and absolute tolerances. </p><pre><code class="language-julia hljs">sim = integrate(initial_data,
    configurations,
    cb,
    cbp;
    method = VCABM(),
    reltol = 1e-8,
    abstol = 1e-8)</code></pre><p>In certain setups, you may require lower errors for the integration to remain stable, especially when dealing with interpolated spacetimes. The <code>integrate</code> function is a wrapper for the DifferentialEquations.jl package&#39;s <code>solve</code> function. As such, you can pass any additional keyword arguments that are accepted by the <code>solve</code>. In particular, any of the available <a href="https://docs.sciml.ai/DiffEqDocs/stable/solvers/ode_solve/">solver methods</a> can be used. For more information, see the <a href="https://docs.sciml.ai/DiffEqDocs/stable/">DifferentialEquations.jl documentation</a>.</p><p>The output data can be extracted as</p><pre><code class="language-julia hljs">output_data = sim.output_data</code></pre><p>This matrix contains the final coordinates and momenta of each ray, with the same structure as the initial data.</p><h3 id="9.-Visualize-the-results"><a class="docs-heading-anchor" href="#9.-Visualize-the-results">9. Visualize the results</a><a id="9.-Visualize-the-results-1"></a><a class="docs-heading-anchor-permalink" href="#9.-Visualize-the-results" title="Permalink"></a></h3><p>Finally, we compute, for instance, the observed bolometric intensity of the radiation field, and produce an image using CairoMakie as</p><pre><code class="language-julia hljs">using CairoMakie

Iobs = observed_bolometric_intensities(initial_data, output_data, configurations)

xs, ys = axes_ranges(camera)
zs = grid_view(Iobs, configurations)

fig = Figure(font = &quot;CMU Serif&quot;)
ax = Axis(fig[1, 1],
    xlabel = L&quot;\alpha \, [\mathrm{deg}]&quot;,
    ylabel = L&quot;\beta \, [\mathrm{deg}]&quot;,
    ylabelsize = 26,
    xlabelsize = 26)
hmap = heatmap!(rad2deg.(xs), rad2deg.(ys), zs; colormap = :gist_heat, interpolate = true)
Colorbar(fig[:, end + 1],
    hmap,
    label = L&quot;I \, [\mathrm{erg}/\mathrm{s}/\mathrm{cm^2}/\mathrm{sr}]&quot;,
    labelsize = 26,
    width    = 15,
    ticksize = 18,
    tickalign = 1)
colsize!(fig.layout, 1, Aspect(1, 1.0))
colgap!(fig.layout, 7)
display(fig)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../spacetimes/catalogue/">Catalogue »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Thursday 21 March 2024 00:34">Thursday 21 March 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
